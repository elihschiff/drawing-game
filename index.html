<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>Drawing Game</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
</head>

<body>
  <div id="app">
    <div class="container">
      <div class="row">
        <div class="col-sm">
        </div>
        <div class="col-6-sm">
          <canvas id="gameBoard" width="700" height="700" style="border:1px solid #d3d3d3;">
        </div>
        <div class="col-sm">
        </div>
      </div>
      <div class="row">
        <div class="col-sm">
        </div>
        <div class="col-6-sm">
          <div class="row">
            <button v-for="color in colors" class="col color-box btn" :style="{background:color}" @click="setColor(color)">
              {{color}}
            </button>
          </div>
        </div>
        <div class="col-sm">
        </div>
      </div>
    </div>
  </div>
</body>
<script>
  var app = new Vue({
    el: '#app',
    data: {
      colors: ['red', 'orange', 'yellow', 'lime','green', 'aqua', 'blue', 'purple', 'pink', 'saddlebrown', 'gray', 'white', 'black'],
      isDrawing: false,
      x: 0,
      y: 0,
      color: "black",
      canvas: null,
      ctx: null,
    },
    methods:{
      init(){
        this.canvas = document.getElementById('gameBoard');
        this.ctx = this.canvas.getContext('2d');
        // Add the event listeners for mousedown, mousemove, and mouseup
        this.canvas.addEventListener('mousedown', e => {
          this.x = e.offsetX;
          this.y = e.offsetY;
          this.isDrawing = true;
        });

        this.canvas.addEventListener('mousemove', e => {
          if (this.isDrawing === true) {
            this.drawLine(this.ctx, this.x, this.y, e.offsetX, e.offsetY);
            this.x = e.offsetX;
            this.y = e.offsetY;
          }
        });

        window.addEventListener('mouseup', e => {
          if (this.isDrawing === true) {
            this.drawLine(this.ctx, this.x, this.y, e.offsetX, e.offsetY);
            this.x = 0;
            this.y = 0;
            this.isDrawing = false;
          }
        });
      },
      drawLine(ctx, x1, y1, x2, y2) {
        this.ctx.beginPath();
        this.ctx.strokeStyle = this.color;
        this.ctx.lineWidth = 3;
        this.ctx.moveTo(x1, y1);
        this.ctx.lineTo(x2, y2);
        this.ctx.stroke();
        this.ctx.closePath();
      },
      setColor(c){
        this.color = c
      }
    },
    mounted(){
      this.init()
    }
  })
</script>

<style>
  .color-box {
    border: 2px solid black;
    margin: .1rem;
    cursor: pointer;
  }
</style>

</html>
